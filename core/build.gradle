[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

sourceSets.main.java.srcDirs = ["src/main/java/", "src-gen/main/java"]
sourceSets.main.resources.srcDirs = ["src/main/res/"]
sourceSets.test.java.srcDirs = ["src/test/java/"]
sourceSets.test.resources.srcDirs = ["src/test/res/"]

configurations {
  stateBuilderAntTask
}

dependencies {
  stateBuilderAntTask files ("libs/statebuilder-ant-task-2.4.jar")
  stateBuilderAntTask files ("libs/statebuilder-java-2.4.jar")
}

task generateJava << {
  clean.delete "${projectDir}/src-gen"
  ant.taskdef (name: "stateBuilder",
          classname: "com.stateforge.statebuilder.ant.StateBuilderAntTask",
          classpath: configurations.stateBuilderAntTask.asPath)
  ant.stateBuilder (input: "${projectDir}/src/main/res", output: "${projectDir}/src-gen/main/java") {}
}

compileJava.dependsOn (generateJava)
jar.exclude ("*.fsmjava")
test.testLogging.showStandardStreams = true;

idea {
  module {
    downloadJavadoc = true
    downloadSources = true
  }
}

eclipse.project {
  name = appName + "-core"
}
